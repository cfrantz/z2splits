syntax = "proto3";
package z2splits;

import "proto/controller.proto";

enum WindowGravity {
    GravityUnknown = 0;
    UpperLeft = 1;
    UpperRight = 2;
    LowerLeft = 3;
    LowerRight = 4;
}

enum ImageType {
    ImageTypeUnknown = 0;
    Image = 1;
    SpriteSheet = 2;
    Text = 3;
}

message SpriteSheetInfo {
    int32 columns = 1;
    int32 width = 2;
    int32 height = 3;
}

message ImageResource {
    // ConfigLoader sets path.
    string path = 1;
    ImageType type = 2;
    string id = 3;
    string filename = 4;
    SpriteSheetInfo sprite = 5;
}

message DisplayImage {
    WindowGravity origin = 1;
    string id = 2;
    int32 x = 3;
    int32 y = 4;
}

message Split {
    string name = 1;
    DisplayImage image = 2;
    int32 time_ms = 3;
    string nickname = 4;
}

message CategoryConfig {
    string name = 1;
    string save_filename = 2;
    repeated Split splits = 3;
    int32 start_delay = 4;
}

message GameConfig {
    string name = 1;
    repeated ImageResource resource = 2;
    repeated CategoryConfig category = 3;
}

message Run {
    int32 number = 1;
    repeated Split splits = 2;
}

message SavedRuns {
    string game = 1;
    string category = 2;
    Run best = 3;
    Run gold = 4;
    repeated Run run = 5;
}

message Config {
    // Users never set path, the loader uses it
    string path = 1;
    repeated string load = 2;
    repeated ControlKeys controls = 3;
    repeated GameConfig game = 4;
}


// vim: ts=4 sts=4 sw=4 expandtab:
